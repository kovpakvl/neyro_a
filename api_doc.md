## Назначение
Документ описывает работу скрипта `api.py`, который поднимает HTTP API для использования обученных моделей определения направления взгляда. Сервис предназначен для интеграции модели в другие приложения и предоставляет прогноз углов взгляда и зоны взгляда по изображению лица.

## Подготовка и зависимости
Для запуска требуется установленный Python и зависимости из `requirements.txt`. Также необходимы обученные артефакты модели, расположенные в каталоге `out/models`, и файл детектора лица `face_landmarker.task`. При отсутствии файла в корне проекта скрипт пытается скопировать его из каталога `шаблон`.

## Порядок запуска
Сервис запускается командой `python api.py` с необязательными параметрами `--host` и `--port`. По умолчанию используется адрес `127.0.0.1` и порт `8000`. После запуска в консоли выводится адрес сервиса.

## Описание API
Сервис обрабатывает два маршрута. Запрос `GET /health` возвращает технический статус и используется для проверки работоспособности. Запрос `POST /predict` принимает JSON с полем `image_b64`, содержащим изображение в формате base64. В ответе возвращаются два числовых значения углов `h_deg` и `v_deg`, а также строковое поле `zone`, отражающее зону направления взгляда.

При обработке запроса изображение декодируется, детектируется лицо через MediaPipe, извлекаются признаки, далее применяется масштабирование признаков и выполняется прогноз двумя регрессионными моделями. Если лицо не обнаружено или признаки невалидны, возвращается ошибка с кодом 422. Неверный путь возвращает 404.

## Результаты работы
Результатом работы сервиса является корректный ответ модели с предсказанными углами и зоной взгляда, готовый для использования в клиентских приложениях.

